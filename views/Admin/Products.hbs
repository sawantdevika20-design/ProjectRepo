<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Manage Products - Jewelicious</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/styles.css" />
    <link rel="stylesheet" href="/public/productstyles.css" />
  </head>
  <body>
  
    <nav>
      <div class="nav-left">
        <img src="logo.png" alt="Jewelicious Logo" />
        <div class="nav-links">
          <a href="#products-list">All Products</a>
          <a href="#categories">Categories</a>
        </div>
      </div>
      <div class="nav-center">
        <span class="brand-name">Jewelicious</span>
      </div>
      <div class="nav-right">
        <a href="/" title="Home"><i class="fas fa-home"></i></a>
        <a href="/logout"><i class="fas fa-sign-out-alt"></i></a>
      </div>
    </nav>

    <pre><h1 style="justify-content : center; font-size:60px; ">
        <i class="fas fa-cube me-3"></i>Product Management
      </h1>
      <h3 style="font-size:25px; ">Manage your jewelry collection efficiently</h3></pre>
    <hr />

    <!-- Row Start -->
    <div class="row">
      <!-- Add Product Card -->
      <div class="column">
        <button
          class="action-button"
          data-bs-toggle="modal"
          data-bs-target="#AddProduct"
        >
          <i class="fas fa-plus me-2"></i>Add Product
        </button>
        </div>

      <div class="column">
        <button class="action-button">
          <a href="#products-list" style="color: white; text-decoration: none;">
            <i class="fas fa-edit me-2"></i>Update Products
          </a>
        </button>
      </div>

      <div class="column">
        <button class="action-button">
          <a href="#products-list" style="color: white; text-decoration: none;">
            <i class="fas fa-trash me-2"></i>Delete Products
          </a>
        </button>
      </div>
    </div>
    <hr />
    {{! Row End }}

    {{#if error}}
      <div class="alert alert-danger text-center" role="alert">
        <i class="fas fa-exclamation-triangle me-2"></i>{{error}}
      </div>
    {{/if}}

    {{! Filter and Search Section  }}
    <h3 class="text-center" id="categories">FILTER & SEARCH</h3>
    <div class="filter-section">
      <div class="row justify-content-center">
          <div class="input-group">
            <span class="input-group-text"><i class="fas fa-search"></i></span>
            <input
              type="text"
              class="form-control"
              placeholder="Search products..."
              id="searchInput"
            />
          </div>
         </div>
         </div>

      <!-- Quick Category Filters -->
      <div class="row justify-content-center">
          <div class="d-flex flex-wrap gap-2 justify-content-center">
            <span class="badge category-button" style="background-color: #5b5247;">All Products</span>
            <span class="badge category-button" style="background-color: #5b5247;">Necklaces</span>
            <span class="badge category-button" style="background-color: #5b5247;">Earrings</span>
            <span class="badge category-button" style="background-color: #5b5247;">Bracelets</span>
            <span class="badge category-button" style="background-color: #5b5247;">Out of Stock</span>
          </div>
      </div>
    </div>
    </div>
    <hr />

    <!-- Products List Section -->
    <h3 class="text-center" id="products-list">ALL PRODUCTS</h3>
    <div class="row justify-content-center">
        <div class="card" style="justify-content: center;">
          <div
            class="card-header d-flex justify-content-between align-items-center"
          >
            <h5 class="mb-0"><i class="fas fa-list me-2"></i>Product Inventory</h5>
             <span class="badge" style="background-color: #5b5247;">{{productCount}} Products</span>
          </div>

          <!-- Products table will go here -->
          <div class="card-body">

{{#if products.length}}
              <div class="table-responsive">
                <table class="table table-striped">
                  <thead>
                    <tr>
                      <th>ID</th>
                      <th>Product Name</th>
                      <th>Category</th>
                      <th>Price</th>
                      <th>Stock</th>
                      <th>Material</th>
                        <th>Colour</th>
                      <th>Description</th>
                      <th>Actions</th>
                    </tr>
                  </thead>
                  <tbody>

 {{#each products}}
                      <tr>
                        <td>{{this.Product_ID}}</td>
                        <td>{{this.Product_Name}}</td>
                        <td>
                          {{#if this.Image}}
                            <img src="{{this.Image}}" alt="{{this.Product_Name}}" style="width: 50px; height: 50px; object-fit: cover;">
                          {{else}}
                            <i class="fas fa-image text-muted" style="font-size: 24px;"></i>
                          {{/if}}
                        </td>
                        <td>₹{{this.Price}}</td>
                         <td>
                          <span class="badge {{#if this.TotalStock}}bg-success{{else}}bg-danger{{/if}}">
                            {{this.TotalStock}} in stock
                          </span>
                        </td>
                        <td>{{this.Category}}</td>
                        <td>{{this.Material}}</td>
                        <td>
                          {{#if this.Colour}}
                            <span class="badge" style="background-color: {{this.Colour}}; color: white;">{{this.Colour}}</span>
                          {{/if}}
                        </td>
                        <td>{{this.Description}}</td>
                        <td>
                          <form action="/Products/Delete/{{this.Product_ID}}" method="POST" style="display: inline;">
                            <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Are you sure you want to delete this product?')">
                              <i class="fas fa-trash"></i> Delete
                            </button>
                          </form>
                        </td>
                      </tr>
                    {{/each}}
                  </tbody>
                </table>
              </div>
            {{else}}
              <div class="text-center py-5">
                <i class="fas fa-cube fa-3x text-muted mb-3"></i>
                <p class="text-muted">No products found</p>
                <button
                  class="action-button"
                  data-bs-toggle="modal"
                  data-bs-target="#AddProduct"
                >

                    {{!-- {{#each Products}}
                      <tr>
                        <td>{{this.Product_ID}}</td>
                        <td>{{this.Image}}</this></td>
                        <td>{{this.Product_Name}}</td>
                        <td>{{this.Category}}</td>
                        <td>₹{{this.Price}}</td>
                        <td>{{this.TotalStock}}</td>
                        <td>{{this.Description}}</td>
                        <td>
                          <form action="/Products/Delete/{{this.Product_ID}}" method="POST" style="display: inline;">
                            <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Are you sure you want to delete this product?')">
                              <i class="fas fa-trash"></i> Delete
                            </button>
                          </form>
                        </td>
                      </tr>
                    {{/each}}
                  </tbody>
                </table>
              </div>
            {{else}}
              <div class="text-center py-5">
              <i class="fas fa-cube fa-3x text-muted mb-3"></i>
              <p class="text-muted">Product list will appear here</p>
              <button
                class="action-button"
                data-bs-toggle="modal"
                data-bs-target="#addProductModal"
              > --}}
                <i class="fas fa-plus me-2"></i>Add Your First Product
              </button>
            </div>
            {{/if}}
          </div>
        </div>
    </div>

    <!-- Add Product Modal -->
    <div class="modal fade" id="AddProduct" tabindex="-1">
      <div class="modal-dialog modal-lg"  style="max-width: 800px; width: 100%;">
        <div class="modal-content"  style="max-width: 800px; width: 100%;">
          <div class="modal-header">
            <h5 class="modal-title"><i class="fas fa-plus-circle me-2"></i>Add
              New Product</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body">
            <form id="AddProductForm"  action="/Products/Add" method="POST" enctype="multipart/form-data">
              <div class="row">
                    <label class="form-label">Product Name</label>
                    <input type="text" class="form-control" name="Product_Name" required />
                </div>

             <div class="row">
                     <div class="col-12">
                  <label class="form-label">Product Image</label>
                  <div class="upload-area" onclick="document.getElementById('imageUpload').click()">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <p>Click to upload an image or drag and drop</p>
                    <p class="text-muted">PNG, JPG, JPEG up to 5MB</p>
                  </div>
                  <input 
                    type="file" 
                    id="imageUpload" 
                    name="image" 
                    accept="image/*" 
                    style="display: none;" 
                    onchange="previewImage(this)"
                  />
                  <img id="imagePreview" class="image-preview" alt="Image preview">
              </div>

<div class="row">
                    <label class="form-label">Price</label>
                    <input
                      type="number"
                      class="form-control"
                      step="0.01"
                      name="Price"
                      required
                    />
                  </div>

<div class="row">
                    <label class="form-label">Stock Quantity</label>
                     <input type="number" class="form-control" name="TotalStock" min="0" required />
                  </div>

                <div class="row">
                    <label class="form-label">Category</label>
                    <select class="form-select" name="Category" required>
                      <option value="">Select Category</option>
                      <option value="necklace">Necklace</option>
                      <option value="earring">Earring</option>
                      <option value="bracelet">Bracelet</option>
                    </select>
              </div>

<div class="row">
                    <label class="form-label">Material</label>
                      <input type="text" class="form-control" name="Material" required />
                  </div>

                  <div class="row">
                    <label class="form-label">Colour</label>
                    <input type="text" class="form-control" name="Colour" placeholder="e.g., Red, Gold, Silver" />
                  </div>
               
              <div class="row">
                <label class="form-label">Description</label>
                <textarea class="form-control" name="Description" rows="3" placeholder="Product description..."></textarea>
              </div>

 <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="submit" class="btn btn-primary">Add Product</button>
              </div>
            </form>
          </div>
          </div>
          </div>
    </div>
          {{!-- <div class="footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >Cancel</button>
            <button
              type="submit"
              form="addProductForm"
              class="btn btn-primary"
            >Add Product</button>
          </div>
        </div>
      </div>
    </div> --}}

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"
    ></script>
     <script>
      function previewImage(input) {
        const preview = document.getElementById('imagePreview');
        if (input.files && input.files[0]) {
          const reader = new FileReader();
          reader.onload = function(e) {
            preview.src = e.target.result;
            preview.style.display = 'block';
          }
          reader.readAsDataURL(input.files[0]);
        }
      }
    </script>
  </body>
</html>